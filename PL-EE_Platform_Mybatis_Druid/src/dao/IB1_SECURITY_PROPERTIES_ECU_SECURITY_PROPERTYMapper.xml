<?xml version="1.0" encoding="UTF8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--namespace绑定一个对应的Mapper接口（Dao）-->
<mapper namespace="dao.IB1_SECURITY_PROPERTIES_ECU_SECURITY_PROPERTYMapper">

    <select id="getIB1_SECURITY_PROPERTIES_ECU_SECURITY_PROPERTY" resultType="pojo.IB1_SECURITY_PROPERTIES_ECU_SECURITY_PROPERTYLei">
        SELECT * FROM IB1_SECURITY_PROPERTIES_ECU_SECURITY_PROPERTY
    <where>
        <if test = "platform_name != null">
            platform_name = #{platform_name}
        </if>
        <if test = "IB1_VERSION != null">
            and IB1_VERSION = #{IB1_VERSION}
        </if>
        <if test = "diagnose_adr != null">
            and diagnose_adr = #{diagnose_adr}
        </if>
    </where>
    </select>

    <select id="getIB1_SECURITY_PROPERTIES_All" resultMap="test">

        SELECT
        ipe.NAME NAME,
        ipe.ECU_ID ECU_ID,

        iessp.optional OPTIONAL,
        iessp.KEY ECU_KEY,
        iessp.DESC ECU_DESC,
        iessp.VALUE ECU_VALUE

        FROM
        IB1_SECURITY_PROPERTIES_ECU_SECURITY_PROPERTY AS iessp
        INNER JOIN
        IB1_SECURITY_PROPERTIES_ECU AS ipe

        ON iessp.platform_name = ipe.platform_name
        AND iessp.diagnose_adr = ipe.diagnose_adr
        AND iessp.IB1_VERSION = ipe.IB1_VERSION

        <where>
            <if test = "platform_name != null">
                iessp.platform_name = #{platform_name}
            </if>
            <if test = "IB1_VERSION != null">
                and iessp.IB1_VERSION = #{IB1_VERSION}
            </if>
            <if test = "diagnose_adr != null">
                and iessp.diagnose_adr = #{diagnose_adr}
            </if>
        </where>

    </select>

    <resultMap id="test" type="pojo.IB1_SECURITY_PROPERTIES_ECU_SECURITY_PROPERTYLei">
        <result property="optional" column="optional"></result>
        <result property="KEY" column="ECU_KEY"></result>
        <result property="DESC" column="ECU_DESC"></result>
        <result property="VALUE" column="ECU_VALUE"></result>

        <association property="IB1_SECURITY_PROPERTIES_ECU" javaType="pojo.IB1_SECURITY_PROPERTIES_ECULei">
            <result property="NAME" column="NAME"></result>
            <result property="ECU_ID" column="ECU_ID"></result>
        </association>

    </resultMap>

</mapper>